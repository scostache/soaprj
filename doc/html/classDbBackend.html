<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Hybfs: DbBackend Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>DbBackend Class Reference</h1><!-- doxytag: class="DbBackend" --><code>#include &lt;<a class="el" href="db__backend_8hpp-source.html">db_backend.hpp</a>&gt;</code>
<p>

<p>
<a href="classDbBackend-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDbBackend.html#29f0925ed36240dab053b494fa59aa6c">DbBackend</a> (const char *path)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDbBackend.html#98ca46437130df92301e261e5d775f36">~DbBackend</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDbBackend.html#7e9214c5c38146d0dd10a7a32880dd58">db_init_storage</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDbBackend.html#7d50394cc935fad4d8c088a886bdc35e">db_close_storage</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDbBackend.html#a20b828dd5bf4777a52043faa607c05d">db_add_file_info</a> (vector&lt; string &gt; *tags, <a class="el" href="structfile__info__t.html">file_info_t</a> *finfo)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDbBackend.html#a6caac9f4381d3e15ca2b6634841603f">db_delete_allfile_info</a> (char *tag)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDbBackend.html#c4340749e3c60252618126ea7cdd95fb">db_delete_file_info</a> (char *abspath)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDbBackend.html#b9e0184670446a311fff33d943ce20be">db_delete_file_tag</a> (char *tag)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDbBackend.html#fc5892139bfc7905e6f25847b3991c75">db_check_tag</a> (const char *tag, const char *value)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">list&lt; string &gt; *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDbBackend.html#966c8db27d4d465abe781a65d9459dbf">db_get_tags_values</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">list&lt; string &gt; *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDbBackend.html#7bcb953ba37eed9a16c58017c1121797">db_get_tags</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDbBackend.html#5b25d836436f853b8e6edc7b7fb57b7b">db_get_files</a> (const char *path, const char *tag, const char *value, void *buf, <a class="el" href="hybfsdef_8h.html#0332a0d89537714023502536e2ed2dcd">filler_t</a> filler)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDbBackend.html#f1c2d17c04f0e462b5b7a33fe0703d8b">db_get_filesinfo</a> (list&lt; string &gt; *tags, string *path, void *buf, <a class="el" href="hybfsdef_8h.html#0332a0d89537714023502536e2ed2dcd">filler_t</a> filler)</td></tr>

<tr><td colspan="2"><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDbBackend.html#a6f3ddb4cab1c7f936454ba4e5c4107e">run_simple_query</a> (const char *query)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDbBackend.html#b18871cdcd6350b213cd17ad71cb21d9">create_main_tables</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDbBackend.html#3265b726a9d761a77b2c72944bb0c83f">db_add_tag</a> (const char *tag, const char *value)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDbBackend.html#ccd21b10294f194f06f5f43409c2a437">db_add_file</a> (<a class="el" href="structfile__info__t.html">file_info_t</a> *finfo)</td></tr>

<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDbBackend.html#e4669c7b046bee2bd37a676ab5d34eaf">db_path</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">sqlite3 *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDbBackend.html#d2122961e7734e089cbd0f68adfaac8c">db</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>

<p>Definition at line <a class="el" href="db__backend_8hpp-source.html#l00050">50</a> of file <a class="el" href="db__backend_8hpp-source.html">db_backend.hpp</a>.</p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="29f0925ed36240dab053b494fa59aa6c"></a><!-- doxytag: member="DbBackend::DbBackend" ref="29f0925ed36240dab053b494fa59aa6c" args="(const char *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DbBackend::DbBackend           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>path</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="db__backend_8cpp-source.html#l00041">41</a> of file <a class="el" href="db__backend_8cpp-source.html">db_backend.cpp</a>.</p>

<p>References <a class="el" href="db__backend_8hpp-source.html#l00081">db</a>, and <a class="el" href="db__backend_8hpp-source.html#l00077">db_path</a>.</p>

</div>
</div><p>
<a class="anchor" name="98ca46437130df92301e261e5d775f36"></a><!-- doxytag: member="DbBackend::~DbBackend" ref="98ca46437130df92301e261e5d775f36" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DbBackend::~DbBackend           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="db__backend_8cpp-source.html#l00049">49</a> of file <a class="el" href="db__backend_8cpp-source.html">db_backend.cpp</a>.</p>

<p>References <a class="el" href="db__backend_8cpp-source.html#l00057">db_close_storage()</a>.</p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a6f3ddb4cab1c7f936454ba4e5c4107e"></a><!-- doxytag: member="DbBackend::run_simple_query" ref="a6f3ddb4cab1c7f936454ba4e5c4107e" args="(const char *query)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int DbBackend::run_simple_query           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>query</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
wrapper for running a query. This is mostly used for creating tables. 
<p>Definition at line <a class="el" href="db__backend_8cpp-source.html#l00073">73</a> of file <a class="el" href="db__backend_8cpp-source.html">db_backend.cpp</a>.</p>

<p>References <a class="el" href="db__backend_8hpp-source.html#l00081">db</a>, and <a class="el" href="db__backend_8cpp-source.html#l00038">DB_PRINTERR</a>.</p>

<p>Referenced by <a class="el" href="db__backend_8cpp-source.html#l00098">create_main_tables()</a>.</p>

</div>
</div><p>
<a class="anchor" name="b18871cdcd6350b213cd17ad71cb21d9"></a><!-- doxytag: member="DbBackend::create_main_tables" ref="b18871cdcd6350b213cd17ad71cb21d9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int DbBackend::create_main_tables           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates initial tables for the given database 
<p>Definition at line <a class="el" href="db__backend_8cpp-source.html#l00098">98</a> of file <a class="el" href="db__backend_8cpp-source.html">db_backend.cpp</a>.</p>

<p>References <a class="el" href="db__backend_8hpp-source.html#l00081">db</a>, <a class="el" href="db__backend_8cpp-source.html#l00031">DB_ERROR</a>, <a class="el" href="db__backend_8cpp-source.html#l00038">DB_PRINTERR</a>, <a class="el" href="hybfs_8h-source.html#l00045">DBG_PRINT</a>, and <a class="el" href="db__backend_8cpp-source.html#l00073">run_simple_query()</a>.</p>

<p>Referenced by <a class="el" href="db__backend_8cpp-source.html#l00167">db_init_storage()</a>.</p>

</div>
</div><p>
<a class="anchor" name="3265b726a9d761a77b2c72944bb0c83f"></a><!-- doxytag: member="DbBackend::db_add_tag" ref="3265b726a9d761a77b2c72944bb0c83f" args="(const char *tag, const char *value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int DbBackend::db_add_tag           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>value</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Adds a pair (tag,value) to the "tags" table. Returns the associated unique number. It does not replace the value for an existing tag. For internal use only. 
<p>Definition at line <a class="el" href="db__backend_8cpp-source.html#l00192">192</a> of file <a class="el" href="db__backend_8cpp-source.html">db_backend.cpp</a>.</p>

<p>References <a class="el" href="db__backend_8hpp-source.html#l00081">db</a>, <a class="el" href="db__backend_8cpp-source.html#l00369">db_check_tag()</a>, <a class="el" href="db__backend_8cpp-source.html#l00038">DB_PRINTERR</a>, <a class="el" href="hybfs_8h-source.html#l00046">DBG_SHOWFC</a>, and <a class="el" href="hybfsdef_8h-source.html#l00040">NULL_VALUE</a>.</p>

<p>Referenced by <a class="el" href="db__backend_8cpp-source.html#l00277">db_add_file_info()</a>.</p>

</div>
</div><p>
<a class="anchor" name="ccd21b10294f194f06f5f43409c2a437"></a><!-- doxytag: member="DbBackend::db_add_file" ref="ccd21b10294f194f06f5f43409c2a437" args="(file_info_t *finfo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int DbBackend::db_add_file           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfile__info__t.html">file_info_t</a> *&nbsp;</td>
          <td class="paramname"> <em>finfo</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Adds the information about a file to the database. It does not replace current info. It returns 0 for succes. Note that in the case of a duplicate ino it returns error. 
<p>Definition at line <a class="el" href="db__backend_8cpp-source.html#l00241">241</a> of file <a class="el" href="db__backend_8cpp-source.html">db_backend.cpp</a>.</p>

<p>References <a class="el" href="db__backend_8hpp-source.html#l00081">db</a>, <a class="el" href="db__backend_8cpp-source.html#l00038">DB_PRINTERR</a>, <a class="el" href="hybfs_8h-source.html#l00046">DBG_SHOWFC</a>, <a class="el" href="hybfsdef_8h-source.html#l00064">file_info_t::fid</a>, <a class="el" href="hybfsdef_8h-source.html#l00065">file_info_t::mode</a>, <a class="el" href="hybfsdef_8h-source.html#l00067">file_info_t::name</a>, and <a class="el" href="hybfsdef_8h-source.html#l00066">file_info_t::namelen</a>.</p>

<p>Referenced by <a class="el" href="db__backend_8cpp-source.html#l00277">db_add_file_info()</a>.</p>

</div>
</div><p>
<a class="anchor" name="7e9214c5c38146d0dd10a7a32880dd58"></a><!-- doxytag: member="DbBackend::db_init_storage" ref="7e9214c5c38146d0dd10a7a32880dd58" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int DbBackend::db_init_storage           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize database: create initial database file and tables in the desired branch, if they don't exist. 
<p>Definition at line <a class="el" href="db__backend_8cpp-source.html#l00167">167</a> of file <a class="el" href="db__backend_8cpp-source.html">db_backend.cpp</a>.</p>

<p>References <a class="el" href="db__backend_8cpp-source.html#l00098">create_main_tables()</a>, <a class="el" href="db__backend_8hpp-source.html#l00081">db</a>, <a class="el" href="db__backend_8cpp-source.html#l00057">db_close_storage()</a>, <a class="el" href="db__backend_8hpp-source.html#l00077">db_path</a>, <a class="el" href="db__backend_8cpp-source.html#l00038">DB_PRINTERR</a>, <a class="el" href="hybfs_8h-source.html#l00045">DBG_PRINT</a>, and <a class="el" href="hybfs_8h-source.html#l00046">DBG_SHOWFC</a>.</p>

<p>Referenced by <a class="el" href="virtualdir_8hpp-source.html#l00032">VirtualDirectory::init()</a>.</p>

</div>
</div><p>
<a class="anchor" name="7d50394cc935fad4d8c088a886bdc35e"></a><!-- doxytag: member="DbBackend::db_close_storage" ref="7d50394cc935fad4d8c088a886bdc35e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DbBackend::db_close_storage           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Close all the databases here 
<p>Definition at line <a class="el" href="db__backend_8cpp-source.html#l00057">57</a> of file <a class="el" href="db__backend_8cpp-source.html">db_backend.cpp</a>.</p>

<p>References <a class="el" href="db__backend_8hpp-source.html#l00081">db</a>, <a class="el" href="db__backend_8cpp-source.html#l00038">DB_PRINTERR</a>, and <a class="el" href="hybfs_8h-source.html#l00046">DBG_SHOWFC</a>.</p>

<p>Referenced by <a class="el" href="db__backend_8cpp-source.html#l00167">db_init_storage()</a>, and <a class="el" href="db__backend_8cpp-source.html#l00049">~DbBackend()</a>.</p>

</div>
</div><p>
<a class="anchor" name="a20b828dd5bf4777a52043faa607c05d"></a><!-- doxytag: member="DbBackend::db_add_file_info" ref="a20b828dd5bf4777a52043faa607c05d" args="(vector&lt; string &gt; *tags, file_info_t *finfo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int DbBackend::db_add_file_info           </td>
          <td>(</td>
          <td class="paramtype">vector&lt; string &gt; *&nbsp;</td>
          <td class="paramname"> <em>tags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfile__info__t.html">file_info_t</a> *&nbsp;</td>
          <td class="paramname"> <em>finfo</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Adds the file information for a list of tags in the main db. 
<p>Definition at line <a class="el" href="db__backend_8cpp-source.html#l00277">277</a> of file <a class="el" href="db__backend_8cpp-source.html">db_backend.cpp</a>.</p>

<p>References <a class="el" href="db__backend_8hpp-source.html#l00081">db</a>, <a class="el" href="db__backend_8cpp-source.html#l00241">db_add_file()</a>, <a class="el" href="db__backend_8cpp-source.html#l00192">db_add_tag()</a>, <a class="el" href="db__backend_8cpp-source.html#l00038">DB_PRINTERR</a>, <a class="el" href="hybfs_8h-source.html#l00046">DBG_SHOWFC</a>, and <a class="el" href="hybfsdef_8h-source.html#l00064">file_info_t::fid</a>.</p>

<p>Referenced by <a class="el" href="virtualdir_8cpp-source.html#l00042">VirtualDirectory::vdir_add_tag()</a>.</p>

</div>
</div><p>
<a class="anchor" name="a6caac9f4381d3e15ca2b6634841603f"></a><!-- doxytag: member="DbBackend::db_delete_allfile_info" ref="a6caac9f4381d3e15ca2b6634841603f" args="(char *tag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int DbBackend::db_delete_allfile_info           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>tag</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Deletes all the records from the main DB, coresponding to the key "tag" 
<p>Definition at line <a class="el" href="db__backend_8cpp-source.html#l00360">360</a> of file <a class="el" href="db__backend_8cpp-source.html">db_backend.cpp</a>.</p>

</div>
</div><p>
<a class="anchor" name="c4340749e3c60252618126ea7cdd95fb"></a><!-- doxytag: member="DbBackend::db_delete_file_info" ref="c4340749e3c60252618126ea7cdd95fb" args="(char *abspath)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int DbBackend::db_delete_file_info           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>abspath</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Deletes the record with the absolute path "abspath" 
<p>Definition at line <a class="el" href="db__backend_8cpp-source.html#l00353">353</a> of file <a class="el" href="db__backend_8cpp-source.html">db_backend.cpp</a>.</p>

</div>
</div><p>
<a class="anchor" name="b9e0184670446a311fff33d943ce20be"></a><!-- doxytag: member="DbBackend::db_delete_file_tag" ref="b9e0184670446a311fff33d943ce20be" args="(char *tag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int DbBackend::db_delete_file_tag           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>tag</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Deletes all the information related to this tag 
<p>Definition at line <a class="el" href="db__backend_8cpp-source.html#l00344">344</a> of file <a class="el" href="db__backend_8cpp-source.html">db_backend.cpp</a>.</p>

</div>
</div><p>
<a class="anchor" name="fc5892139bfc7905e6f25847b3991c75"></a><!-- doxytag: member="DbBackend::db_check_tag" ref="fc5892139bfc7905e6f25847b3991c75" args="(const char *tag, const char *value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int DbBackend::db_check_tag           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>value</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Checks if the tag is really a key in the main DB. Returns the tag id if it exists, 0 otherwise. In case of error, returns -1. 
<p>Definition at line <a class="el" href="db__backend_8cpp-source.html#l00369">369</a> of file <a class="el" href="db__backend_8cpp-source.html">db_backend.cpp</a>.</p>

<p>References <a class="el" href="db__backend_8hpp-source.html#l00081">db</a>, <a class="el" href="db__backend_8cpp-source.html#l00038">DB_PRINTERR</a>, <a class="el" href="hybfs_8h-source.html#l00045">DBG_PRINT</a>, <a class="el" href="hybfs_8h-source.html#l00046">DBG_SHOWFC</a>, and <a class="el" href="hybfsdef_8h-source.html#l00040">NULL_VALUE</a>.</p>

<p>Referenced by <a class="el" href="db__backend_8cpp-source.html#l00192">db_add_tag()</a>.</p>

</div>
</div><p>
<a class="anchor" name="966c8db27d4d465abe781a65d9459dbf"></a><!-- doxytag: member="DbBackend::db_get_tags_values" ref="966c8db27d4d465abe781a65d9459dbf" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">list&lt; string &gt; * DbBackend::db_get_tags_values           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns all tag-value pairs from the database 
<p>Definition at line <a class="el" href="db__backend_8cpp-source.html#l00496">496</a> of file <a class="el" href="db__backend_8cpp-source.html">db_backend.cpp</a>.</p>

<p>References <a class="el" href="db__backend_8hpp-source.html#l00081">db</a>, <a class="el" href="hybfs_8h-source.html#l00046">DBG_SHOWFC</a>, <a class="el" href="hybfs_8h-source.html#l00050">PRINT_ERROR</a>, and <a class="el" href="db__backend_8cpp-source.html#l00471">tags_values_callback()</a>.</p>

<p>Referenced by <a class="el" href="virtualdir_8cpp-source.html#l00078">VirtualDirectory::vdir_list_root()</a>.</p>

</div>
</div><p>
<a class="anchor" name="7bcb953ba37eed9a16c58017c1121797"></a><!-- doxytag: member="DbBackend::db_get_tags" ref="7bcb953ba37eed9a16c58017c1121797" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">list&lt; string &gt; * DbBackend::db_get_tags           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns all tags from the database 
<p>Definition at line <a class="el" href="db__backend_8cpp-source.html#l00447">447</a> of file <a class="el" href="db__backend_8cpp-source.html">db_backend.cpp</a>.</p>

<p>References <a class="el" href="db__backend_8hpp-source.html#l00081">db</a>, <a class="el" href="hybfs_8h-source.html#l00046">DBG_SHOWFC</a>, <a class="el" href="hybfs_8h-source.html#l00050">PRINT_ERROR</a>, and <a class="el" href="db__backend_8cpp-source.html#l00427">tags_callback()</a>.</p>

<p>Referenced by <a class="el" href="virtualdir_8cpp-source.html#l00078">VirtualDirectory::vdir_list_root()</a>.</p>

</div>
</div><p>
<a class="anchor" name="5b25d836436f853b8e6edc7b7fb57b7b"></a><!-- doxytag: member="DbBackend::db_get_files" ref="5b25d836436f853b8e6edc7b7fb57b7b" args="(const char *path, const char *tag, const char *value, void *buf, filler_t filler)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int DbBackend::db_get_files           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="hybfsdef_8h.html#0332a0d89537714023502536e2ed2dcd">filler_t</a>&nbsp;</td>
          <td class="paramname"> <em>filler</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the file information for the tag and the specified value. If the value is null than it returns all the files that have that tag. If the path is specified, it will try to do a match with the real path from the database. 
<p>Definition at line <a class="el" href="db__backend_8cpp-source.html#l00534">534</a> of file <a class="el" href="db__backend_8cpp-source.html">db_backend.cpp</a>.</p>

<p>References <a class="el" href="db__backend_8hpp-source.html#l00081">db</a>, <a class="el" href="db__backend_8cpp-source.html#l00038">DB_PRINTERR</a>, and <a class="el" href="hybfs_8h-source.html#l00045">DBG_PRINT</a>.</p>

<p>Referenced by <a class="el" href="db__backend_8cpp-source.html#l00521">db_get_filesinfo()</a>.</p>

</div>
</div><p>
<a class="anchor" name="f1c2d17c04f0e462b5b7a33fe0703d8b"></a><!-- doxytag: member="DbBackend::db_get_filesinfo" ref="f1c2d17c04f0e462b5b7a33fe0703d8b" args="(list&lt; string &gt; *tags, string *path, void *buf, filler_t filler)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int DbBackend::db_get_filesinfo           </td>
          <td>(</td>
          <td class="paramtype">list&lt; string &gt; *&nbsp;</td>
          <td class="paramname"> <em>tags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string *&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="hybfsdef_8h.html#0332a0d89537714023502536e2ed2dcd">filler_t</a>&nbsp;</td>
          <td class="paramname"> <em>filler</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="db__backend_8cpp-source.html#l00521">521</a> of file <a class="el" href="db__backend_8cpp-source.html">db_backend.cpp</a>.</p>

<p>References <a class="el" href="misc_8cpp-source.html#l00072">break_tag()</a>, <a class="el" href="db__backend_8cpp-source.html#l00534">db_get_files()</a>, and <a class="el" href="hybfs_8h-source.html#l00045">DBG_PRINT</a>.</p>

<p>Referenced by <a class="el" href="virtualdir_8cpp-source.html#l00113">VirtualDirectory::vdir_readdir()</a>.</p>

</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="e4669c7b046bee2bd37a676ab5d34eaf"></a><!-- doxytag: member="DbBackend::db_path" ref="e4669c7b046bee2bd37a676ab5d34eaf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string <a class="el" href="classDbBackend.html#e4669c7b046bee2bd37a676ab5d34eaf">DbBackend::db_path</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
path to the database 
<p>Definition at line <a class="el" href="db__backend_8hpp-source.html#l00077">77</a> of file <a class="el" href="db__backend_8hpp-source.html">db_backend.hpp</a>.</p>

<p>Referenced by <a class="el" href="db__backend_8cpp-source.html#l00167">db_init_storage()</a>, and <a class="el" href="db__backend_8cpp-source.html#l00041">DbBackend()</a>.</p>

</div>
</div><p>
<a class="anchor" name="d2122961e7734e089cbd0f68adfaac8c"></a><!-- doxytag: member="DbBackend::db" ref="d2122961e7734e089cbd0f68adfaac8c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sqlite3* <a class="el" href="classDbBackend.html#d2122961e7734e089cbd0f68adfaac8c">DbBackend::db</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
handle to the database 
<p>Definition at line <a class="el" href="db__backend_8hpp-source.html#l00081">81</a> of file <a class="el" href="db__backend_8hpp-source.html">db_backend.hpp</a>.</p>

<p>Referenced by <a class="el" href="db__backend_8cpp-source.html#l00098">create_main_tables()</a>, <a class="el" href="db__backend_8cpp-source.html#l00241">db_add_file()</a>, <a class="el" href="db__backend_8cpp-source.html#l00277">db_add_file_info()</a>, <a class="el" href="db__backend_8cpp-source.html#l00192">db_add_tag()</a>, <a class="el" href="db__backend_8cpp-source.html#l00369">db_check_tag()</a>, <a class="el" href="db__backend_8cpp-source.html#l00057">db_close_storage()</a>, <a class="el" href="db__backend_8cpp-source.html#l00534">db_get_files()</a>, <a class="el" href="db__backend_8cpp-source.html#l00447">db_get_tags()</a>, <a class="el" href="db__backend_8cpp-source.html#l00496">db_get_tags_values()</a>, <a class="el" href="db__backend_8cpp-source.html#l00167">db_init_storage()</a>, <a class="el" href="db__backend_8cpp-source.html#l00041">DbBackend()</a>, and <a class="el" href="db__backend_8cpp-source.html#l00073">run_simple_query()</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>include/<a class="el" href="db__backend_8hpp-source.html">db_backend.hpp</a><li>hybfs-core/<a class="el" href="db__backend_8cpp-source.html">db_backend.cpp</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Nov 24 20:28:58 2008 for Hybfs by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
